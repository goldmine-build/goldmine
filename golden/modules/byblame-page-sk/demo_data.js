export const fakeNow = Date.parse('2019-11-08T00:00:00Z');

export const canvaskit = {
  data: [],
};

export const gm = {
  data: [{
    groupID: '4edb719f1bc49bae585ff270df17f08039a96b6c:252cdb782418949651cc5eb7d467c57ddff3d1c7:a1050ed2b1120613d9ae9587e3c0f4116e17337f:3f7c865936cc808af26d88bc1f5740a29cfce200:05f6a01bf9fd25be9e5fff4af5505c3945058b1d',
    nDigests: 1,
    nTests: 1,
    affectedTests: [{
      test: 'complexclip_bw_layer',
      num: 1,
      sample_digest: '457875b610908dde8bfc5f45c907eb62',
    }],
    commits: [{
      commit_time: 1573171214,
      hash: '05f6a01bf9fd25be9e5fff4af5505c3945058b1d',
      author: 'Elisa (elisa@example.com)',
    }, {
      commit_time: 1573171074,
      hash: '3f7c865936cc808af26d88bc1f5740a29cfce200',
      author: 'Iris (iris@example.com)',
    }, {
      commit_time: 1573170075,
      hash: 'a1050ed2b1120613d9ae9587e3c0f4116e17337f',
      author: 'Daniel (daniel@example.com)',
    }, {
      commit_time: 1573179814,
      hash: '252cdb782418949651cc5eb7d467c57ddff3d1c7',
      author: 'Elisa (elisa@example.com)',
    }, {
      commit_time: 1573179564,
      hash: '4edb719f1bc49bae585ff270df17f08039a96b6c',
      author: 'Joe (joe@example.com)',
    }],
  }, {
    groupID: '4edb719f1bc49bae585ff270df17f08039a96b6c:252cdb782418949651cc5eb7d467c57ddff3d1c7',
    nDigests: 7,
    nTests: 7,
    affectedTests: [{
      test: 'aarectmodes',
      num: 1,
      sample_digest: 'c6476baec94eb6a5071606575318e4df',
    }, {
      test: 'aaxfermodes',
      num: 1,
      sample_digest: '4acfd6b3a3943cc5d75cd22e966ae6f1',
    }, {
      test: 'hairmodes',
      num: 1,
      sample_digest: 'f9e20c63b5ce3b58d9b6a90fa3e7224c',
    }, {
      test: 'imagefilters_xfermodes',
      num: 1,
      sample_digest: '47644613317040264fea6fa815af32e8',
    }, {
      test: 'lattice2',
      num: 1,
      sample_digest: '16e41798ecd59b1523322a57b49cc17f',
    }, {
      test: 'xfermodes',
      num: 1,
      sample_digest: '8fbee03f794c455c4e4842ec2736b744',
    }, {
      test: 'xfermodes3',
      num: 1,
      sample_digest: 'fed2ff29abe371fc0ec1b2c65dfb3949',
    }],
    commits: [{
      commit_time: 1573149814,
      hash: '252cdb782418949651cc5eb7d467c57ddff3d1c7',
      author: 'Elisa (elisa@example.com)',
    }, {
      commit_time: 1573149564,
      hash: '4edb719f1bc49bae585ff270df17f08039a96b6c',
      author: 'Joe (joe@example.com)',
    }],
  }, {
    groupID: '73a722ce97ad935f936a4c7512b6724c41e0ce4e',
    nDigests: 41,
    nTests: 1,
    affectedTests: [{
      test: 'skottie_colorize',
      num: 41,
      sample_digest: '024ce342b014c6fdb000f7c18d6d0775',
    }],
    commits: [{
      commit_time: 1572978684,
      hash: '73a722ce97ad935f936a4c7512b6724c41e0ce4e',
      author: 'Bob (bob@example.com)',
    }],
  }, {
    groupID: '85c3d68f2539ed7a1e71f6c9d12baaf9e6be59d8',
    nDigests: 51,
    nTests: 31,
    affectedTests: null,
    commits: [{
      commit_time: 1572899861,
      hash: '85c3d68f2539ed7a1e71f6c9d12baaf9e6be59d8',
      author: 'Alice (alice@example.com)',
    }],
  }, {
    groupID: '7da048b5e8f17374bcd5baf48539eaa7ebe40e5c',
    nDigests: 13,
    nTests: 3,
    affectedTests: [{
      test: 'shadow_utils',
      num: 5,
      sample_digest: '134d3c4fd609cd7f2e9cca43d78aa5d3',
    }, {
      test: 'shadow_utils_gray',
      num: 4,
      sample_digest: '292eb1e5b5860ba278ffa73efc9dd7c1',
    }, {
      test: 'shadow_utils_occl',
      num: 4,
      sample_digest: '918df0cc65d1b3ae7b8d8041afa40635',
    }],
    commits: [{
      commit_time: 1572442816,
      hash: '7da048b5e8f17374bcd5baf48539eaa7ebe40e5c',
      author: 'Frank (frank@example.com)',
    }],
  }, {
    groupID: '342fbc54844d0d3fc9d20e20b45115db1e33395b',
    nDigests: 1,
    nTests: 1,
    affectedTests: [{
      test: 'dftext_blob_persp',
      num: 1,
      sample_digest: '42a7bfc2d825412dfb82f6e3a12106c2',
    }],
    commits: [{
      commit_time: 1571959019,
      hash: '342fbc54844d0d3fc9d20e20b45115db1e33395b',
      author: 'Liam (liam@example.com)',
    }],
  }],
};

export const svg = {
  data: [{
    groupID: 'd2c67f44f8c2351e60e6ee224a060e916cd44f34',
    nDigests: 12,
    nTests: 12,
    affectedTests: null,
    commits: [{
      commit_time: 1571948193,
      hash: 'd2c67f44f8c2351e60e6ee224a060e916cd44f34',
      author: 'Alice (alice@example.com)',
    }],
  }, {
    groupID: '05f6a01bf9fd25be9e5fff4af5505c3945058b1d',
    nDigests: 2,
    nTests: 1,
    affectedTests: [{
      test: 'A_large_blank_world_map_with_oceans_marked_in_blue.svg',
      num: 2,
      sample_digest: '3c62b1dd009bb18bbb84d862cbc3652c',
    }],
    commits: [{
      commit_time: 1573151114,
      hash: '05f6a01bf9fd25be9e5fff4af5505c3945058b1d',
      author: 'Elisa (elisa@example.com)',
    }],
  }, {
    groupID: 'd84dd4babb71796ee194fa1913150d86d6aa643b',
    nDigests: 2,
    nTests: 1,
    affectedTests: [{
      test: 'ynev.svg',
      num: 2,
      sample_digest: '80a7bcb4b51ad1aa876aa2144d0648bb',
    }],
    commits: [{
      commit_time: 1573048663,
      hash: 'd84dd4babb71796ee194fa1913150d86d6aa643b',
      author: 'Henry (henry@example.com)',
    }],
  }, {
    groupID: '3f7c865936cc808af26d88bc1f5740a29cfce200:05f6a01bf9fd25be9e5fff4af5505c3945058b1d',
    nDigests: 1,
    nTests: 1,
    affectedTests: [{
      test: 'A_large_blank_world_map_with_oceans_marked_in_blue.svg',
      num: 1,
      sample_digest: '02fc74ad862a6041e9ea35769a67af20',
    }],
    commits: [{
      commit_time: 1573151114,
      hash: '05f6a01bf9fd25be9e5fff4af5505c3945058b1d',
      author: 'Elisa (elisa@example.com)',
    }, {
      commit_time: 1573151074,
      hash: '3f7c865936cc808af26d88bc1f5740a29cfce200',
      author: 'Iris (iris@example.com)',
    }],
  }, {
    groupID: 'e1e197186238d8d304a39db9f94258d9584a8973',
    nDigests: 1,
    nTests: 1,
    affectedTests: [{
      test: 'gallardo.svg',
      num: 1,
      sample_digest: 'ed591512ff68fa088ec9aac3bb5d760d',
    }],
    commits: [{
      commit_time: 1572460288,
      hash: 'e1e197186238d8d304a39db9f94258d9584a8973',
      author: 'Iris (iris@example.com)',
    }],
  }],
};

export const gitlog = [
  {
    commit_time: 1572899861,
    commit: '85c3d68f2539ed7a1e71f6c9d12baaf9e6be59d8',
    message: 'Some improvements to backend texture creation.',
  }, {
    commit_time: 1572978684,
    commit: '73a722ce97ad935f936a4c7512b6724c41e0ce4e',
    message: '[skottie] Fix trim path mode interpretation',
  }, {
    commit_time: 1572442816,
    commit: '7da048b5e8f17374bcd5baf48539eaa7ebe40e5c',
    message: 'Use texture for shadow falloff',
  }, {
    commit_time: 1573149814,
    commit: '252cdb782418949651cc5eb7d467c57ddff3d1c7',
    message: 'One glyph() to rule them all!!!',
  }, {
    commit_time: 1573149564,
    commit: '4edb719f1bc49bae585ff270df17f08039a96b6c',
    message: 'flesh out blendmodes through Screen',
  }, {
    commit_time: 1571959019,
    commit: '342fbc54844d0d3fc9d20e20b45115db1e33395b',
    message: 'Roll recipe dependencies (trivial).',
  }, {
    commit_time: 1573151114,
    commit: '05f6a01bf9fd25be9e5fff4af5505c3945058b1d',
    message: 'Remove unused methods from SkStrike',
  }, {
    commit_time: 1573151074,
    commit: '3f7c865936cc808af26d88bc1f5740a29cfce200',
    message: 'avoid the JIT on MSAN builds',
  }, {
    commit_time: 1572242717,
    commit: '428b5de64a081642736a4e35f0f9265e27dcff9b',
    message: 'Roll third_party/externals/angle2 77fba58c9658..95a736bd3347 (17 commits)',
  }, {
    commit_time: 1571934862,
    commit: '4a4400d9e9fa41776441e3909ea7505080c8cdb9',
    message: 'Roll recipe dependencies (trivial).',
  }, {
    commit_time: 1573150075,
    commit: 'a1050ed2b1120613d9ae9587e3c0f4116e17337f',
    message: 'SkPDF/docs: note that Sfntly subsetter is deprecated',
  }, {
    commit_time: 1571946923,
    commit: '557e812779e40accf50b3080750a65f7b7cae222',
    message: 'Make GrSurfaceProxy ref counts thread safe.',
  }, {
    commit_time: 1573048663,
    commit: 'd84dd4babb71796ee194fa1913150d86d6aa643b',
    message: 'Combine mask and edge distance in TessellationHelper',
  }, {
    commit_time: 1573047513,
    commit: '6e54a299cce92871bffab6341ef0b41f51ff3525',
    message: 'Assert we are now in the world of single-primitive-type render passes',
  }, {
    commit_time: 1571940294,
    commit: '740f85949db2aeb20641c790a8be18512838dfcc',
    message: 'Redo removing annoying link messages',
  }, {
    commit_time: 1572368650,
    commit: '793c9e8c98bbceb645a0701d74cbc0cd48270e2b',
    message: 'Cache simple descriptor sets on GrVkTexture.',
  }, {
    commit_time: 1572638907,
    commit: '79b7134b5fad2c792f0db62e4dd92a99d4eff87f',
    message: '[canvaskit] Add relative SkPath operators',
  }, {
    commit_time: 1573152914,
    commit: '81a8d282d356667aab7bc8c0513da81bb1c5f3c4',
    message: 'Reland "hook up float comparisons to x86 JIT"',
  }, {
    commit_time: 1572027682,
    commit: 'c466945ddd3b5e1d8c3e7dc43def893b85dec598',
    message: 'tweak ar/libtool setup',
  }, {
    commit_time: 1571946104,
    commit: 'c5a2c759fb66d969cf54e6e4a455a2748e06562b',
    message: 'Pull tessellation forward into GrTextureOp::onPrePrepareDraws',
  }, {
    commit_time: 1571951253,
    commit: 'd8c69b645ba317d58d3ddbe111156b8efe781a5e',
    message: 'Make NUC7i5BNK SkottieWASM/Lottie_Web bots ON_DEMAND',
  }, {
    commit_time: 1571936971,
    commit: 'e107faa062c448e1cd405be4b5358170847a74fb',
    message: 'SkRemoteGlyphCache  Add tracing to diff canvas',
  }, {
    commit_time: 1572552680,
    commit: 'f5ad3f421e112108d44da73dc8e3bd8a513748c4',
    message: 'Fast SkPackedGlyphID CTOR',
  }, {
    commit_time: 1571948193,
    commit: 'd2c67f44f8c2351e60e6ee224a060e916cd44f34',
    message: 'Reland "Allow direct readback for formats in non-ES OpenGL"',
  }, {
    commit_time: 1573151114,
    commit: '05f6a01bf9fd25be9e5fff4af5505c3945058b1d',
    message: 'Remove unused methods from SkStrike',
  }, {
    commit_time: 1572460288,
    commit: 'e1e197186238d8d304a39db9f94258d9584a8973',
    message: 'clean up unorm8 helpers',
  },
];

export function fakeGitlogRpc(url) {
  // Extract start and end hashes.
  const re = /start=([a-f0-9]{40})&end=([a-f0-9]{40})/;
  const match = re.exec(url);
  if (!match) return 404;
  const start = match[1]; const
    end = match[2];

  // Find start and end times.
  const startTime = gitlog.find((entry) => entry.commit === start).commit_time;
  const endTime = gitlog.find((entry) => entry.commit === end).commit_time;

  // Find message and return it.
  const log = gitlog.filter(
    (entry) => startTime <= entry.commit_time
              && entry.commit_time <= endTime,
  )
  // Remove auxiliary field "commit_time".
    .map((entry) => ({
      commit: entry.commit,
      message: entry.message,
    }));
  return { log: log };
}

export const trstatus = {
  ok: false,
  firstCommit: {
    commit_time: 1572357082,
    hash: 'ee08d523f60a04499c9023a349ef8174ab301f8f',
    author: 'Alice (alice@example.com)',
  },
  lastCommit: {
    commit_time: 1573598625,
    hash: '9501212cd0580acfed85a90c3a16b81847fde482',
    author: 'Bob (bob@example.com)',
  },
  totalCommits: 256,
  filledCommits: 256,
  corpStatus: [{
    name: 'canvaskit',
    ok: false,
    minCommitHash: '',
    untriagedCount: 0,
    negativeCount: 0,
  }, {
    name: 'gm',
    ok: false,
    minCommitHash: '',
    untriagedCount: 114,
    negativeCount: 1494,
  }, {
    name: 'svg',
    ok: false,
    minCommitHash: '',
    untriagedCount: 18,
    negativeCount: 21,
  }],
};
